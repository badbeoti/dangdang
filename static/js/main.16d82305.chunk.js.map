{"version":3,"sources":["data/newData.ts","data/divisionList.ts","component/ButtonList.tsx","utils/effectFc.ts","component/Canvas.tsx","component/InputSection.tsx","App.tsx","styles/global-styles.ts","index.tsx","img/Logo.png"],"names":["newData","map","item","name","대여소명","size","거치대수","division","대여소_구","id","대여소ID","divGroupMap","d3","d","divisionList","e","i","divC","get","length","bikeC","data","reduce","acc","cur","isSelect","StyledButton","styled","button","props","ButtonList","onToggle","initialList","sort","a","b","div","key","onClick","effectFc","selectList","selection","canvas","axis","x","scaleBand","domain","range","chartWidth","paddingInner","y","scaleLinear","max","changeAxis","chartHeight","color","selectAll","remove","append","attr","call","axisBottom","axisRight","rects","exit","bandwidth","transition","duration","delay","_","ease","easeCircleOut","enter","texts","text","style","width","height","marginLeft","StyledCanvas","section","BtnWrapper","ToggleBtn","initialData","Canvas","onReset","onSetAxis","useState","setList","ref","useRef","setSelection","useEffect","select","current","filter","console","log","InputBoard","CanvasSection","BtnSection","InputSection","arr","setArr","setAxis","Root","body","ImageLogo","img","App","src","Logo","GlobalStyle","createGlobalStyle","reset","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.16d82305.chunk.js","sourcesContent":["import data from \"./data.json\";\r\n\r\n// interface DataProps {\r\n// \tnewData?: typeof newData;\r\n// \t// data?-옵셔널한 타입으로 변경하면 상위 컴포넌트에 props가 없어도 구동 가능.\r\n// }\r\n\r\nconst newData = data.map((item) => {\r\n\tconst newObj = {\r\n\t\tname: item.대여소명,\r\n\t\tsize: item.거치대수,\r\n\t\tdivision: item.대여소_구,\r\n\t\tid: item.대여소ID,\r\n\t};\r\n\treturn newObj;\r\n});\r\n\r\nexport default newData;\r\n","import newData from \"./newData\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst divGroupMap = d3.group(newData, (d) => d.division);\r\n\r\nconst divisionArr = [\r\n\t\"강남구\",\r\n\t\"강동구\",\r\n\t\"강북구\",\r\n\t\"강서구\",\r\n\t\"관악구\",\r\n\t\"광진구\",\r\n\t\"구로구\",\r\n\t\"금천구\",\r\n\t\"노원구\",\r\n\t\"도봉구\",\r\n\t\"동작구\",\r\n\t\"동대문구\",\r\n\t\"마포구\",\r\n\t\"서대문구\",\r\n\t\"서초구\",\r\n\t\"성동구\",\r\n\t\"성북구\",\r\n\t\"송파구\",\r\n\t\"양천구\",\r\n\t\"영등포구\",\r\n\t\"용산구\",\r\n\t\"은평구\",\r\n\t\"종로구\",\r\n\t\"중구\",\r\n\t\"중랑구\",\r\n];\r\n\r\nconst divisionList = divisionArr.map((e: string, i: number) => {\r\n\tconst divisionObj = {\r\n\t\tname: e,\r\n\t\tid: i,\r\n\t\tdivC: divGroupMap.get(e)!.length,\r\n\t\tbikeC: divGroupMap\r\n\t\t\t.get(e)!\r\n\t\t\t.map((data) => data.size)\r\n\t\t\t.reduce((acc, cur) => acc + cur, 0),\r\n\t\tisSelect: false,\r\n\t};\r\n\treturn divisionObj;\r\n});\r\n\r\nexport default divisionList;\r\n","import React, { ButtonHTMLAttributes } from \"react\";\r\nimport styled from \"styled-components\";\r\ninterface DivisionProps {\r\n\tname: string;\r\n\tid: number;\r\n\tisSelect: boolean;\r\n}\r\n\r\ninterface ISection extends ButtonHTMLAttributes<HTMLButtonElement> {\r\n\tdivisionList: { name: string; id: number; isSelect: boolean }[];\r\n\tonToggle: (key: number) => void;\r\n}\r\n\r\nconst StyledButton: any = styled.button`\r\n\tdisplay: inline-block;\r\n\toutline: none;\r\n\tborder: none;\r\n\tborder-radius: 4px;\r\n\tcolor: white;\r\n\tfont-weight: 800;\r\n\tcursor: pointer;\r\n\tpadding-left: 1rem;\r\n\tpadding-right: 1rem;\r\n\r\n\tfont-size: 1rem;\r\n\r\n\tbackground: ${(props: DivisionProps) =>\r\n\t\tprops.isSelect ? \"#218c74\" : \"#2ed573\"};\r\n\t&:hover {\r\n\t\tbackground: #7bed9f;\r\n\t}\r\n`;\r\n\r\nfunction ButtonList({ divisionList, onToggle }: ISection) {\r\n\tconst initialList = divisionList.sort((a, b) => (a.id > b.id ? 1 : -1));\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{initialList.map((div: DivisionProps) => (\r\n\t\t\t\t<StyledButton\r\n\t\t\t\t\tname={div.name}\r\n\t\t\t\t\tisSelect={div.isSelect}\r\n\t\t\t\t\tkey={div.id}\r\n\t\t\t\t\tonClick={() => onToggle(div.id)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{div.name}\r\n\t\t\t\t</StyledButton>\r\n\t\t\t))}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default ButtonList;\r\n","// import React, { useEffect, useState, useRef } from \"react\";\r\n// import styled from \"styled-components\";\r\n// import divisionList from \"../data/divisionList\";\r\nimport * as d3 from \"d3\";\r\nimport { select, Selection } from \"d3-selection\";\r\nimport { scaleLinear, scaleBand, easeBounce, easeCircleOut } from \"d3\";\r\nimport { max } from \"d3-array\";\r\nimport { axisLeft, axisBottom, axisRight } from \"d3-axis\";\r\n\r\nfunction effectFc(\r\n\tselectList: {\r\n\t\tname: string;\r\n\t\tid: number;\r\n\t\tisSelect: boolean;\r\n\t\tdivC: number;\r\n\t\tbikeC: number;\r\n\t}[],\r\n\tselection: d3.Selection<null, unknown, null, undefined> | null,\r\n\tcanvas: {\r\n\t\twidth: number;\r\n\t\theight: number;\r\n\t\tchartWidth: number;\r\n\t\tchartHeight: number;\r\n\t\tmarginLeft: number;\r\n\t},\r\n\taxis: {\r\n\t\tchangeAxis: boolean;\r\n\t}\r\n) {\r\n\tconst x = scaleBand()\r\n\t\t.domain(selectList.map((d) => d.name))\r\n\t\t.range([0, canvas.chartWidth])\r\n\t\t.paddingInner(0.1);\r\n\r\n\tconst y = scaleLinear()\r\n\t\t.domain([0, max(selectList, (d) => (axis.changeAxis ? d.bikeC : d.divC))!])\r\n\t\t.range([canvas.chartHeight, 0]);\r\n\r\n\tconst color = scaleLinear()\r\n\t\t.domain([0, max(selectList, (d) => (axis.changeAxis ? d.bikeC : d.divC))!])\r\n\t\t.range([0.2, 0.8]);\r\n\r\n\tselection!.selectAll(\"g\").remove();\r\n\r\n\tconst xAxisGroup = selection!\r\n\t\t.append(\"g\")\r\n\t\t.attr(\"font-weight\", \"bold\")\r\n\t\t.attr(\"transform\", `translate(0,${canvas.chartHeight})`)\r\n\t\t.call(axisBottom(x));\r\n\r\n\tconst yAxisGroup = selection!\r\n\t\t.append(\"g\")\r\n\t\t.attr(\"transform\", `translate(${canvas.chartWidth},0)`)\r\n\t\t.call(axisRight(y));\r\n\r\n\tconst rects = selection!.selectAll(\"rect\").data(selectList);\r\n\r\n\trects.exit().remove();\r\n\r\n\trects\r\n\t\t.attr(\"width\", x.bandwidth)\r\n\t\t.attr(\"x\", (d) => x(d.name)!)\r\n\t\t.attr(\"fill\", (d) =>\r\n\t\t\taxis.changeAxis\r\n\t\t\t\t? d3.interpolateGreens(color(d.bikeC))\r\n\t\t\t\t: d3.interpolateGreens(color(d.divC))\r\n\t\t)\r\n\t\t.attr(\"height\", 0)\r\n\t\t.attr(\"y\", canvas.chartHeight)\r\n\t\t.transition()\r\n\t\t.duration(1000)\r\n\t\t.delay((_, i) => i * 100)\r\n\t\t.ease(easeCircleOut)\r\n\t\t.attr(\r\n\t\t\t\"height\",\r\n\t\t\t(d) => canvas.chartHeight - y(axis.changeAxis ? d.bikeC : d.divC) - 10\r\n\t\t)\r\n\t\t.attr(\"y\", (d) => y(axis.changeAxis ? d.bikeC : d.divC)!);\r\n\r\n\trects\r\n\t\t.enter()\r\n\t\t.append(\"rect\")\r\n\t\t.attr(\"width\", x.bandwidth)\r\n\t\t.attr(\"x\", (d) => x(d.name)!)\r\n\t\t.attr(\"fill\", (d) =>\r\n\t\t\taxis.changeAxis\r\n\t\t\t\t? d3.interpolateGreens(color(d.bikeC))\r\n\t\t\t\t: d3.interpolateGreens(color(d.divC))\r\n\t\t)\r\n\t\t.attr(\"height\", 0)\r\n\t\t.attr(\"y\", canvas.chartHeight)\r\n\t\t.transition()\r\n\t\t.duration(1000)\r\n\t\t.delay((_, i) => i * 100)\r\n\t\t.ease(easeCircleOut)\r\n\t\t.attr(\r\n\t\t\t\"height\",\r\n\t\t\t(d) => canvas.chartHeight - y(axis.changeAxis ? d.bikeC : d.divC) - 10\r\n\t\t)\r\n\t\t.attr(\"y\", (d) => y(axis.changeAxis ? d.bikeC : d.divC)!);\r\n\r\n\tconst texts = selection!\r\n\t\t.append(\"g\")\r\n\t\t.attr(\"class\", \"textGroup\")\r\n\t\t.selectAll(\"text\")\r\n\t\t.data(selectList);\r\n\r\n\ttexts.exit().remove();\r\n\r\n\ttexts\r\n\t\t.text((d) => (axis.changeAxis ? d.bikeC : d.divC))\r\n\t\t.attr(\"class\", \"text\")\r\n\t\t.attr(\"fill\", \"#f5f6fa\")\r\n\t\t.style(\"font-weight\", \"bold\")\r\n\t\t.attr(\"x\", (d) => x(d.name)! + x.bandwidth() / 2)\r\n\t\t.attr(\"y\", canvas.chartHeight)\r\n\t\t.transition()\r\n\t\t.duration(1000)\r\n\t\t.delay((_, i) => i * 100)\r\n\t\t.ease(easeCircleOut)\r\n\t\t.attr(\"y\", (d) => y(axis.changeAxis ? d.bikeC : d.divC) + 20)\r\n\t\t.style(\"text-anchor\", \"middle\");\r\n\r\n\ttexts\r\n\t\t.enter()\r\n\t\t.append(\"text\")\r\n\t\t.text((d) => (axis.changeAxis ? d.bikeC : d.divC))\r\n\t\t.attr(\"class\", \"text\")\r\n\t\t.attr(\"fill\", \"#f5f6fa\")\r\n\t\t.style(\"font-weight\", \"bold\")\r\n\t\t.attr(\"x\", (d) => x(d.name)! + x.bandwidth() / 2)\r\n\t\t.attr(\"y\", canvas.chartHeight)\r\n\t\t.transition()\r\n\t\t.duration(1000)\r\n\t\t.delay((_, i) => i * 100)\r\n\t\t.ease(easeCircleOut)\r\n\t\t.attr(\"y\", (d) => y(axis.changeAxis ? d.bikeC : d.divC) + 20)\r\n\t\t.style(\"text-anchor\", \"middle\");\r\n}\r\n\r\nexport default effectFc;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport divisionList from \"../data/divisionList\";\r\nimport * as d3 from \"d3\";\r\nimport { select, Selection } from \"d3-selection\";\r\nimport {\r\n\tscaleLinear,\r\n\tscaleBand,\r\n\teaseElastic,\r\n\teaseBounce,\r\n\teaseCircleOut,\r\n} from \"d3\";\r\nimport { max } from \"d3-array\";\r\nimport { axisBottom, axisRight } from \"d3-axis\";\r\nimport effectFc from \"../utils/effectFc\";\r\n\r\ninterface SelectList {\r\n\tdivisionList: {\r\n\t\tname: string;\r\n\t\tid: number;\r\n\t\tisSelect: boolean;\r\n\t\tdivC: number;\r\n\t\tbikeC: number;\r\n\t}[];\r\n\tonReset: () => void;\r\n\taxis: {\r\n\t\tchangeAxis: boolean;\r\n\t};\r\n\tonSetAxis: () => void;\r\n}\r\n\r\nconst canvas = {\r\n\twidth: 1200,\r\n\theight: 500,\r\n\tchartWidth: 1150,\r\n\tchartHeight: 400,\r\n\tmarginLeft: 100,\r\n};\r\n\r\nconst StyledCanvas: any = styled.section`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\r\n\tmargin-top: 4rem;\r\n`;\r\n\r\nconst BtnWrapper: any = styled.div`\r\n\tdisplay: flex;\r\n\twidth: 80%;\r\n\tjustify-content: space-around;\r\n\tflex-direction: row;\r\n\tmargin-bottom: 3rem;\r\n`;\r\n\r\nconst ToggleBtn: any = styled.button`\r\n\twidth: 12rem;\r\n\theight: 3rem;\r\n\tfont-size: 1rem;\r\n\tvertical-align: middle;\r\n\tcursor: pointer;\r\n\tbackground-color: #078c2b;\r\n\t&:hover {\r\n\t\tbackground-color: #7bed9f;\r\n\t}\r\n\tcolor: white;\r\n\tfont-weight: 700;\r\n\tborder: medium solid #7bed9f;\r\n\tborder-radius: 1rem;\r\n`;\r\n\r\nconst initialData = divisionList.sort((a, b) => (a.id > b.id ? 1 : -1));\r\n\r\nfunction Canvas({ divisionList, onReset, axis, onSetAxis }: SelectList) {\r\n\tconst [selectList, setList] = useState(divisionList);\r\n\tconst ref = useRef(null);\r\n\tconst [selection, setSelection] = useState<null | Selection<\r\n\t\tnull,\r\n\t\tunknown,\r\n\t\tnull,\r\n\t\tundefined\r\n\t>>(null);\r\n\r\n\tlet x = scaleBand()\r\n\t\t.domain(selectList.map((d) => d.name))\r\n\t\t.range([0, canvas.chartWidth])\r\n\t\t.paddingInner(0.1);\r\n\r\n\tlet y = scaleLinear()\r\n\t\t.domain([0, max(selectList, (d) => (axis.changeAxis ? d.bikeC : d.divC))!])\r\n\t\t.range([canvas.chartHeight, 0]);\r\n\r\n\tlet color = scaleLinear()\r\n\t\t.domain([0, max(selectList, (d) => (axis.changeAxis ? d.bikeC : d.divC))!])\r\n\t\t.range([0.2, 0.8]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!selection) {\r\n\t\t\tsetSelection(select(ref.current));\r\n\t\t} else {\r\n\t\t\tconst xAxisGroup = selection\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"font-weight\", \"bold\")\r\n\t\t\t\t.attr(\"transform\", `translate(0,${canvas.chartHeight})`)\r\n\t\t\t\t.attr(\"class\", \"xAxis\")\r\n\t\t\t\t.call(axisBottom(x));\r\n\r\n\t\t\tconst yAxisGroup = selection\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"transform\", `translate(${canvas.chartWidth},0)`)\r\n\t\t\t\t.call(axisRight(y));\r\n\r\n\t\t\tselection\r\n\t\t\t\t.selectAll(\"rect\")\r\n\t\t\t\t.data(divisionList)\r\n\t\t\t\t.enter()\r\n\t\t\t\t.append(\"rect\")\r\n\t\t\t\t// .attr(\"fill\", (d) => d3.interpolateGreens(color(d.divC)))\r\n\t\t\t\t.attr(\"fill\", (d) =>\r\n\t\t\t\t\taxis.changeAxis\r\n\t\t\t\t\t\t? d3.interpolateGreens(color(d.bikeC))\r\n\t\t\t\t\t\t: d3.interpolateGreens(color(d.divC))\r\n\t\t\t\t)\r\n\r\n\t\t\t\t.attr(\"width\", x.bandwidth)\r\n\t\t\t\t.attr(\"x\", (d) => x(d.name)!)\r\n\r\n\t\t\t\t.attr(\"height\", 0)\r\n\t\t\t\t.attr(\"y\", canvas.chartHeight)\r\n\t\t\t\t.transition()\r\n\t\t\t\t.duration(1000)\r\n\t\t\t\t.delay((_, i) => i * 100)\r\n\t\t\t\t.ease(easeCircleOut)\r\n\t\t\t\t.attr(\r\n\t\t\t\t\t\"height\",\r\n\t\t\t\t\t(d) => canvas.chartHeight - y(axis.changeAxis ? d.bikeC : d.divC) - 10\r\n\t\t\t\t)\r\n\t\t\t\t.attr(\"y\", (d) => y(axis.changeAxis ? d.bikeC : d.divC)!);\r\n\r\n\t\t\tselection\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"class\", \"textGroup\")\r\n\t\t\t\t.selectAll(\"text\")\r\n\t\t\t\t.data(divisionList)\r\n\t\t\t\t.enter()\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.text((d) => (axis.changeAxis ? d.bikeC : d.divC))\r\n\t\t\t\t.attr(\"class\", \"text\")\r\n\t\t\t\t.attr(\"fill\", \"#f5f6fa\")\r\n\t\t\t\t.attr(\"x\", (d) => x(d.name)! + x.bandwidth() / 2)\r\n\r\n\t\t\t\t.attr(\"y\", canvas.chartHeight)\r\n\t\t\t\t.transition()\r\n\t\t\t\t.duration(1000)\r\n\t\t\t\t.delay((_, i) => i * 100)\r\n\t\t\t\t.ease(easeCircleOut)\r\n\t\t\t\t.attr(\"y\", (d) => y(axis.changeAxis ? d.bikeC : d.divC) + 20)\r\n\t\t\t\t.style(\"text-anchor\", \"middle\")\r\n\t\t\t\t.style(\"font-weight\", \"bold\");\r\n\t\t}\r\n\t}, [selection]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (divisionList.filter((div) => div.isSelect === true).length > 1) {\r\n\t\t\teffectFc(selectList, selection, canvas, axis);\r\n\t\t}\r\n\t}, [selectList]);\r\n\r\n\tconst updateList = () => {\r\n\t\tsetList(divisionList.filter((div) => div.isSelect === true));\r\n\t};\r\n\r\n\tconst resetList = () => {\r\n\t\tsetList(initialData.sort((a, b) => (a.id > b.id ? 1 : -1)));\r\n\t\tconsole.log(initialData);\r\n\t\teffectFc(selectList, selection, canvas, axis);\r\n\t\t// 초기화면에서 정렬과 초기화가 안되는 부분을 그냥 resetList 함수에서도 effectFc를 실행시켜\r\n\t\t// 해결하기로 했다.\r\n\t\tonReset();\r\n\t};\r\n\r\n\tconst sort = () => {\r\n\t\tif (initialData === selectList) {\r\n\t\t\tsetList(\r\n\t\t\t\tinitialData.sort((a, b) =>\r\n\t\t\t\t\taxis.changeAxis\r\n\t\t\t\t\t\t? a.bikeC > b.bikeC\r\n\t\t\t\t\t\t\t? 1\r\n\t\t\t\t\t\t\t: -1\r\n\t\t\t\t\t\t: a.divC > b.divC\r\n\t\t\t\t\t\t? 1\r\n\t\t\t\t\t\t: -1\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tsetList(\r\n\t\t\t\tselectList.sort((a, b) =>\r\n\t\t\t\t\taxis.changeAxis\r\n\t\t\t\t\t\t? a.bikeC > b.bikeC\r\n\t\t\t\t\t\t\t? 1\r\n\t\t\t\t\t\t\t: -1\r\n\t\t\t\t\t\t: a.divC > b.divC\r\n\t\t\t\t\t\t? 1\r\n\t\t\t\t\t\t: -1\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t\teffectFc(selectList, selection, canvas, axis);\r\n\t};\r\n\r\n\tconst switchAxis = () => {\r\n\t\tonSetAxis();\r\n\t\teffectFc(selectList, selection, canvas, { changeAxis: !axis.changeAxis });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<StyledCanvas>\r\n\t\t\t<svg ref={ref} width={canvas.width} height={canvas.height}></svg>\r\n\t\t\t<BtnWrapper>\r\n\t\t\t\t<ToggleBtn onClick={() => switchAxis()}>\r\n\t\t\t\t\t단위 변경 [{axis.changeAxis ? \"자전거 수\" : \"거치대 수\"}]\r\n\t\t\t\t</ToggleBtn>\r\n\t\t\t\t<ToggleBtn onClick={() => updateList()}>Update Button</ToggleBtn>\r\n\t\t\t\t<ToggleBtn onClick={() => resetList()}>Reset Button</ToggleBtn>\r\n\t\t\t\t<ToggleBtn onClick={() => sort()}>Sort Button</ToggleBtn>\r\n\t\t\t</BtnWrapper>\r\n\t\t</StyledCanvas>\r\n\t);\r\n}\r\n\r\nexport default Canvas;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport divisionList from \"../data/divisionList\";\r\nimport ButtonList from \"./ButtonList\";\r\nimport Canvas from \"./Canvas\";\r\n\r\nconst InputBoard = styled.section`\r\n\tdisplay: grid;\r\n\tgrid-template-columns: 1fr;\r\n\tgrid-template-rows: 6fr 3fr 1fr;\r\n\tjustify-content: center;\r\n`;\r\n\r\nconst CanvasSection = styled.section`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n`;\r\n\r\nconst BtnSection = styled.section`\r\n\tdisplay: grid;\r\n\tgrid-template-columns: repeat(5, 1fr);\r\n\tgrid-gap: 8px;\r\n`;\r\n// grid-template-columns: repeat(auto-fit, minmax(150px, 1fr);\r\n\r\nfunction InputSection() {\r\n\tconst [arr, setArr] = useState(divisionList);\r\n\t// 미리 가공된 data를 useState로 담는다.\r\n\r\n\tconst [axis, setAxis] = useState({\r\n\t\tchangeAxis: false,\r\n\t});\r\n\r\n\t// useEffect(() => {\r\n\t// \tsetAxis({\r\n\t// \t\tchangeAxis: false,\r\n\t// \t});\r\n\t// });\r\n\r\n\tconsole.log(axis.changeAxis);\r\n\r\n\tconst onSetAxis = () => {\r\n\t\tsetAxis({\r\n\t\t\tchangeAxis: !axis.changeAxis,\r\n\t\t});\r\n\t};\r\n\r\n\tconst onToggle = (key: number) => {\r\n\t\tsetArr(\r\n\t\t\tarr.map((div) =>\r\n\t\t\t\tdiv.id === key ? { ...div, isSelect: !div.isSelect } : div\r\n\t\t\t)\r\n\t\t);\r\n\t}; // 연결된 ButtonList 컴포넌트에 넣을 toggle 함수 (key:number) => void;로\r\n\t// 버튼의 id와 arr.map 함수로 설정된 div객체의 id를 비교하여 isSelect 상태를 설정한다.\r\n\r\n\tconst onReset = () => {\r\n\t\tsetArr(\r\n\t\t\tarr\r\n\t\t\t\t.sort((a, b) => (a.id > b.id ? 1 : -1))\r\n\t\t\t\t.map((div) => (div.isSelect ? { ...div, isSelect: false } : div))\r\n\t\t);\r\n\t};\r\n\t// Canvas 컴포넌트에서 sort를 진행하게 되면 data의 순서가 바뀌어\r\n\t// reset 작업시에는 되돌리는 메소드와 select 돼 있을 경우 false로 되돌려 초기화한다.\r\n\r\n\treturn (\r\n\t\t<InputBoard>\r\n\t\t\t<CanvasSection>\r\n\t\t\t\t<Canvas\r\n\t\t\t\t\tdivisionList={arr}\r\n\t\t\t\t\tonReset={onReset}\r\n\t\t\t\t\taxis={axis}\r\n\t\t\t\t\tonSetAxis={onSetAxis}\r\n\t\t\t\t></Canvas>\r\n\t\t\t</CanvasSection>\r\n\t\t\t<BtnSection>\r\n\t\t\t\t<ButtonList divisionList={arr} onToggle={onToggle}></ButtonList>\r\n\t\t\t</BtnSection>\r\n\t\t</InputBoard>\r\n\t);\r\n}\r\n\r\nexport default InputSection;\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport InputSection from \"./component/InputSection\";\r\nimport styled from \"styled-components\";\r\nimport Logo from \"./img/Logo.png\";\r\n\r\nconst Root: any = styled.body`\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\twidth: 100%;\r\n\theight: 100vh;\r\n\tbackground-color: #f5f6fa;\r\n`;\r\n\r\nconst ImageLogo: any = styled.img`\r\n\twidth: 15rem;\r\n\theight: 5rem;\r\n\tmargin-top: 3rem;\r\n\tmargin-right: 3rem;\r\n`;\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<Root>\r\n\t\t\t<ImageLogo src={Logo}></ImageLogo>\r\n\t\t\t<InputSection></InputSection>\r\n\t\t</Root>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import { createGlobalStyle } from \"styled-components\";\r\nimport reset from \"styled-reset\";\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  ${reset}\r\n  * {\r\n    box-sizing: border-box;\r\n  }\r\n  body{\r\n    background-color: #ffffff;\r\n    font-family: -apple-system,system-ui,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif;\r\n  }\r\n  a {\r\n    color: inherit;\r\n    text-decoration: none;\r\n  }\r\n  input, button {\r\n    background-color: transparent;\r\n    border: none;\r\n    outline: none;\r\n  }\r\n  h1, h2, h3, h4, h5, h6{\r\n    font-family:'Maven Pro', sans-serif;\r\n  }\r\n  ol, ul, li {\r\n    list-style: none;\r\n  }\r\n  img {\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n`;\r\n\r\nexport default GlobalStyle;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport GlobalStyle from \"./styles/global-styles\";\r\n\r\nReactDOM.render(\r\n\t<>\r\n\t\t<GlobalStyle />\r\n\t\t<React.StrictMode>\r\n\t\t\t<App />\r\n\t\t</React.StrictMode>\r\n\t</>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n","module.exports = __webpack_public_path__ + \"static/media/Logo.3fc22374.png\";"],"sourceRoot":""}